import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useEffect, useCallback, useState } from "react";
import useEmblaCarousel from "embla-carousel-react";
import { ChevronLeft, ChevronRight } from "lucide-react";
import { useAdvertisement } from "@/context/advertismentContext";
import { IoLocationSharp } from "react-icons/io5";
import { CiPhone } from "react-icons/ci";
import AdvertiseLeft from "./AdvertiseLeft";
const AdvertismentSlider = () => {
    const { data } = useAdvertisement(); // جايبة الإعلانات من الـ context
    const [emblaRef, emblaApi] = useEmblaCarousel({ loop: true, align: "start" });
    const [canScrollPrev, setCanScrollPrev] = useState(false);
    const [canScrollNext, setCanScrollNext] = useState(false);
    const onSelect = useCallback(() => {
        if (!emblaApi)
            return;
        setCanScrollPrev(emblaApi.canScrollPrev());
        setCanScrollNext(emblaApi.canScrollNext());
    }, [emblaApi]);
    // التحكم في الزر السابق / التالي
    const scrollPrev = useCallback(() => emblaApi && emblaApi.scrollPrev(), [emblaApi]);
    const scrollNext = useCallback(() => emblaApi && emblaApi.scrollNext(), [emblaApi]);
    useEffect(() => {
        if (!emblaApi)
            return;
        onSelect();
        emblaApi.on("select", onSelect);
    }, [emblaApi, onSelect]);
    if (!data || data.length === 0) {
        return (_jsx("div", { className: "AdvertiseContainer w-full flex flex-col lg:flex-row items-center justify-between", children: _jsx(AdvertiseLeft, {}) }));
    }
    return (_jsxs("div", { className: "relative w-full overflow-hidden", children: [_jsxs("div", { className: "relative w-full text-center bg-gradient-to-r from-teal-600 via-orange-500 to-yellow-600 to-black-300  p-4 sm:p-6 lg:p-8 rounded-b-2xl sm:rounded-b-3xl shadow-lg", children: [_jsx("h1", { className: "text-white font-extrabold text-xl sm:text-2xl md:text-3xl lg:text-4xl drop-shadow-md mb-2 animate-pulse", children: "\uD83D\uDE80 Advertise Now On Our Platform!" }), _jsx("p", { className: "text-white/90 text-sm sm:text-base md:text-lg lg:text-xl px-2", children: "Want your business to shine here? Contact us today for special offers \uD83C\uDF1F" }), _jsx("button", { className: "mt-3 sm:mt-4 bg-white text-teal-600 font-semibold px-4 sm:px-6 py-1.5 sm:py-2 rounded-full shadow-md hover:bg-pink-100 transition-all duration-300 text-sm sm:text-base", children: "Contact Us" })] }), data.length === 1 ? (_jsx("div", { className: "min-w-full sm:min-w-[100%] md:min-w-[100%] p-2 sm:p-4", children: _jsxs("div", { className: "bg-gradient-to-br from-pink-100 via-white to-purple-100 rounded-xl sm:rounded-2xl shadow-xl hover:scale-[1.02] transition-transform duration-300 overflow-hidden flex flex-col border border-pink-200", children: [_jsx("div", { className: "h-40 sm:h-48 w-full overflow-hidden", children: _jsx("img", { src: data[0].image || "https://via.placeholder.com/400x200", alt: data[0].name, className: "w-full h-full object-cover hover:scale-110 transition-transform duration-500" }) }), _jsxs("div", { className: "p-3 sm:p-4 flex flex-col justify-between flex-grow", children: [_jsxs("div", { children: [_jsx("h2", { className: "font-extrabold text-lg sm:text-xl text-teal-600 uppercase tracking-wide", children: data[0].name.toLocaleUpperCase() }), _jsx("p", { className: "text-gray-700 text-xs sm:text-sm line-clamp-3 italic mt-2", children: data[0].description }), _jsxs("div", { className: "flex flex-col sm:flex-row gap-2 sm:gap-3 items-start sm:items-center justify-start py-2", children: [_jsxs("p", { className: "text-xs sm:text-sm text-gray-500 flex items-center", children: [_jsx(IoLocationSharp, { color: "#f97316", className: "mr-1" }), _jsx("span", { className: "truncate", children: data[0].location || "Unknown location" })] }), _jsxs("p", { className: "text-xs sm:text-sm text-gray-500 flex items-center", children: [_jsx(CiPhone, { color: "#f97316", className: "mr-1" }), _jsx("span", { className: "truncate", children: data[0].phone || "No phone available" })] })] })] }), _jsxs("div", { className: "mt-3 text-xs text-gray-500", children: ["From", " ", new Date(data[0].extraDetails?.startDate).toLocaleDateString(), " ", "\u2192 ", new Date(data[0].extraDetails?.endDate).toLocaleDateString()] })] })] }) }, data[0]._id || 0)) : (_jsx("div", { className: "embla", ref: emblaRef, children: _jsx("div", { className: "flex", children: data?.map((ad, index) => (_jsx("div", { className: "min-w-full sm:min-w-[50%] md:min-w-[50.3333%] p-2 sm:p-4", children: _jsxs("div", { className: "bg-gradient-to-br from-pink-100 via-white to-purple-100 rounded-xl sm:rounded-2xl shadow-xl hover:scale-[1.02] transition-transform duration-300 overflow-hidden flex flex-col border border-pink-200", children: [_jsx("div", { className: "h-40 sm:h-48 w-full overflow-hidden", children: _jsx("img", { src: ad.image || "https://via.placeholder.com/400x200", alt: ad.name, className: "w-full h-full object-cover hover:scale-110 transition-transform duration-500" }) }), _jsxs("div", { className: "p-3 sm:p-4 flex flex-col justify-between flex-grow", children: [_jsxs("div", { children: [_jsx("h2", { className: "font-extrabold text-lg sm:text-xl text-teal-600 uppercase tracking-wide", children: ad.name.toLocaleUpperCase() }), _jsx("p", { className: "text-gray-700 text-xs sm:text-sm line-clamp-3 italic mt-2", children: ad.description }), _jsxs("div", { className: "flex flex-col sm:flex-row gap-2 sm:gap-3 items-start sm:items-center justify-start py-2", children: [_jsxs("p", { className: "text-xs sm:text-sm text-gray-500 flex items-center", children: [_jsx(IoLocationSharp, { color: "#f97316", className: "mr-1" }), _jsx("span", { className: "truncate", children: ad.location || "Unknown location" })] }), _jsxs("p", { className: "text-xs sm:text-sm text-gray-500 flex items-center", children: [_jsx(CiPhone, { color: "#f97316", className: "mr-1" }), _jsx("span", { className: "truncate", children: ad.phone || "No phone available" })] })] })] }), _jsxs("div", { className: "mt-3 text-xs text-gray-500", children: ["From", " ", new Date(ad.extraDetails?.startDate).toLocaleDateString(), " ", "\u2192", " ", new Date(ad.extraDetails?.endDate).toLocaleDateString()] })] })] }) }, ad._id || index))) }) })), _jsx("button", { className: "absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-10 bg-orange-500 text-white hover:bg-teal-600 rounded-full p-2 sm:p-3 shadow-lg transition-all duration-300 disabled:opacity-50", onClick: scrollPrev, disabled: !canScrollPrev, children: _jsx(ChevronLeft, { className: "w-4 h-4 sm:w-5 sm:h-5" }) }), _jsx("button", { className: "absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-10 bg-orange-500 text-white hover:bg-teal-600 rounded-full p-2 sm:p-3 shadow-lg transition-all duration-300 disabled:opacity-50", onClick: scrollNext, disabled: !canScrollNext, children: _jsx(ChevronRight, { className: "w-4 h-4 sm:w-5 sm:h-5" }) })] }));
};
export default AdvertismentSlider;
